-- H2 2.2.224; 
;              
CREATE USER IF NOT EXISTS "DBUSER" SALT 'bc7a09c13dcf6fa4' HASH '8f08ee50823c2d8ed3b306438c47797b5f26925545d0650021d9cf25c978b5d7' ADMIN;      
CREATE SEQUENCE "PUBLIC"."ANNUAL_REPORT_SEQ" START WITH 1 INCREMENT BY 50;     
CREATE SEQUENCE "PUBLIC"."INDICATOR_TASK_SEQ" START WITH 1 INCREMENT BY 50;    
CREATE SEQUENCE "PUBLIC"."INDICATOR_VALUE_SEQ" START WITH 1 INCREMENT BY 50;   
CREATE SEQUENCE "PUBLIC"."POSITIVE_ENERGY_DISTRICT_SEQ" START WITH 1 INCREMENT BY 50;          
CREATE SEQUENCE "PUBLIC"."SUSTAINABILITY_INDICATOR_SEQ" START WITH 1 INCREMENT BY 50;          
CREATE CACHED TABLE "PUBLIC"."ANNUAL_REPORT"(
    "ID" INTEGER NOT NULL,
    "ASSIGNED_YEAR" INTEGER NOT NULL,
    "ENERGY_SOURCE_FACTORS_JSON" CHARACTER LARGE OBJECT,
    "FET_SOURCE_FACTORS_JSON" CHARACTER LARGE OBJECT,
    "KPIS_JSON" CHARACTER LARGE OBJECT,
    "PED_ID" INTEGER NOT NULL,
    "RES_SOURCES_JSON" CHARACTER LARGE OBJECT,
    "STATUS" TINYINT
);    
ALTER TABLE "PUBLIC"."ANNUAL_REPORT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_EF" PRIMARY KEY("ID");
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.ANNUAL_REPORT;            
CREATE INDEX "PUBLIC"."ANNUALREPORT_PEDID_IDX" ON "PUBLIC"."ANNUAL_REPORT"("PED_ID" NULLS FIRST);              
CREATE CACHED TABLE "PUBLIC"."INDICATOR_TASK"(
    "ID" INTEGER NOT NULL,
    "ACTUAL_BUDGET" FLOAT(53),
    "ACTUAL_ENERGY_SAVED" FLOAT(53),
    "CREATED_AT" TIMESTAMP(6) WITH TIME ZONE NOT NULL,
    "DEADLINE" DATE NOT NULL,
    "ENERGY_SAVED_UNIT" TINYINT,
    "EXPECTED_ENERGY_SAVED" FLOAT(53),
    "INDICATOR_ID" INTEGER NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "PLANNED_BUDGET" FLOAT(53) NOT NULL,
    "STATUS" TINYINT NOT NULL
);   
ALTER TABLE "PUBLIC"."INDICATOR_TASK" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_236" PRIMARY KEY("ID");              
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.INDICATOR_TASK;           
CREATE INDEX "PUBLIC"."TASK_INDICATORID_IDX" ON "PUBLIC"."INDICATOR_TASK"("INDICATOR_ID" NULLS FIRST);         
CREATE CACHED TABLE "PUBLIC"."INDICATOR_VALUE"(
    "ID" INTEGER NOT NULL,
    "AMOUNT" FLOAT(53) NOT NULL,
    "CREATED_AT" DATE,
    "CREATION_YEAR" INTEGER,
    "DATA_SOURCE_CODE" CHARACTER VARYING(255),
    "INDICATOR_ID" INTEGER NOT NULL
);          
ALTER TABLE "PUBLIC"."INDICATOR_VALUE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_49" PRIMARY KEY("ID");              
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.INDICATOR_VALUE;          
CREATE INDEX "PUBLIC"."VALUE_INDICATORID_IDX" ON "PUBLIC"."INDICATOR_VALUE"("INDICATOR_ID" NULLS FIRST);       
CREATE CACHED TABLE "PUBLIC"."POSITIVE_ENERGY_DISTRICT"(
    "ID" INTEGER NOT NULL,
    "AVG_HOUSEHOLD_INCOME" FLOAT(53) NOT NULL,
    "BASELINE_YEAR" INTEGER NOT NULL,
    "BUILD_UP_AREA_SIZE" FLOAT(53) NOT NULL,
    "COOLING_DEGREE_DAYS" INTEGER,
    "COUNTRY_CODE" CHARACTER VARYING(150),
    "CREATED_AT" TIMESTAMP(6) WITH TIME ZONE,
    "DESCRIPTION" CHARACTER VARYING(255),
    "FOCUS_DISTRICT_POPULATION" BIGINT NOT NULL,
    "FOCUS_DISTRICT_SIZE" FLOAT(53) NOT NULL,
    "GHG_EMISSIONS_TOTAL_IN_BASELINE" FLOAT(53) NOT NULL,
    "HEATING_DEGREE_DAYS" INTEGER,
    "INTERNAL_SUCCESS_RATE" FLOAT(53),
    "MONEY_SPENT" FLOAT(53),
    "NAME" CHARACTER VARYING(150),
    "PEOPLE_REACHED" BIGINT,
    "PERCENT_SELF_SUPPLY_RENEWABLE_ENERGY_IN_BASELINE" FLOAT(53) NOT NULL,
    "RETURN_OF_INVESTMENT" FLOAT(53),
    "TARGET_YEAR" INTEGER NOT NULL
);             
ALTER TABLE "PUBLIC"."POSITIVE_ENERGY_DISTRICT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4589D51F_1" PRIMARY KEY("ID");             
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.POSITIVE_ENERGY_DISTRICT; 
CREATE CACHED TABLE "PUBLIC"."SUSTAINABILITY_INDICATOR"(
    "ID" INTEGER NOT NULL,
    "CATEGORY" CHARACTER VARYING(255),
    "CODE" CHARACTER VARYING(255),
    "CREATED_AT" TIMESTAMP(6) WITH TIME ZONE,
    "DEFINITION_STATUS" TINYINT NOT NULL,
    "PARENT_INDICATOR_CODE" CHARACTER VARYING(255),
    "PED_ID" INTEGER NOT NULL,
    "TOTAL_VALUE" FLOAT(53),
    "UNIT" CHARACTER VARYING(255)
);     
ALTER TABLE "PUBLIC"."SUSTAINABILITY_INDICATOR" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_30" PRIMARY KEY("ID");     
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.SUSTAINABILITY_INDICATOR; 
CREATE INDEX "PUBLIC"."INDICATOR_PEDID_IDX" ON "PUBLIC"."SUSTAINABILITY_INDICATOR"("PED_ID" NULLS FIRST);      
ALTER TABLE "PUBLIC"."POSITIVE_ENERGY_DISTRICT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4589D5" CHECK("FOCUS_DISTRICT_POPULATION" >= CAST(1 AS BIGINT)) NOCHECK;   
ALTER TABLE "PUBLIC"."INDICATOR_TASK" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" CHECK("ENERGY_SAVED_UNIT" BETWEEN 0 AND 1) NOCHECK;               
ALTER TABLE "PUBLIC"."SUSTAINABILITY_INDICATOR" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_3" CHECK("DEFINITION_STATUS" BETWEEN 0 AND 3) NOCHECK;     
ALTER TABLE "PUBLIC"."INDICATOR_TASK" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_23" CHECK("STATUS" BETWEEN 0 AND 3) NOCHECK;         
ALTER TABLE "PUBLIC"."INDICATOR_VALUE" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" CHECK("AMOUNT" >= CAST(0.0 AS DOUBLE PRECISION)) NOCHECK;        
ALTER TABLE "PUBLIC"."POSITIVE_ENERGY_DISTRICT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_45" CHECK("AVG_HOUSEHOLD_INCOME" >= CAST(1.0 AS DOUBLE PRECISION)) NOCHECK;
ALTER TABLE "PUBLIC"."POSITIVE_ENERGY_DISTRICT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_458" CHECK("BASELINE_YEAR" >= 1900) NOCHECK;               
ALTER TABLE "PUBLIC"."POSITIVE_ENERGY_DISTRICT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4589D51F_0" CHECK("TARGET_YEAR" >= 1900) NOCHECK;          
ALTER TABLE "PUBLIC"."POSITIVE_ENERGY_DISTRICT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4589D51F" CHECK("HEATING_DEGREE_DAYS" >= 1) NOCHECK;       
ALTER TABLE "PUBLIC"."POSITIVE_ENERGY_DISTRICT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4589D51" CHECK("FOCUS_DISTRICT_SIZE" >= CAST(1.0 AS DOUBLE PRECISION)) NOCHECK;            
ALTER TABLE "PUBLIC"."ANNUAL_REPORT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E" CHECK("STATUS" BETWEEN 0 AND 3) NOCHECK;           
ALTER TABLE "PUBLIC"."POSITIVE_ENERGY_DISTRICT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4589" CHECK("BUILD_UP_AREA_SIZE" >= CAST(1.0 AS DOUBLE PRECISION)) NOCHECK;
ALTER TABLE "PUBLIC"."POSITIVE_ENERGY_DISTRICT" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4589D" CHECK("COOLING_DEGREE_DAYS" >= 1) NOCHECK;          
